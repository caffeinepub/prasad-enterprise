{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Switch canonical site URL to prasadenterprise-epm and update all internal domain references",
  "requirements": [
    {
      "id": "REQ-43",
      "summary": "Set the canonical public site URL to https://prasadenterprise-epm.caffeine.xyz/ and ensure SITE_CONFIG is normalized and used consistently.",
      "acceptanceCriteria": [
        "`frontend/src/config/site.ts` sets `SITE_CONFIG.url` to `https://prasadenterprise-epm.caffeine.xyz/` (with trailing slash) or a single normalized form used consistently throughout the app.",
        "No user-facing UI text, links intended to represent the site’s primary URL, or metadata derived from `SITE_CONFIG` displays `https://prasadenterprise.caffeine.xyz`, `https://www.prasadenterprise.caffeine.xyz`, or any draft domain."
      ],
      "file_operations": [
        {
          "path": "frontend/src/config/site.ts",
          "operation": "modify",
          "description": "Update `SITE_CONFIG.url` to exactly `https://prasadenterprise-epm.caffeine.xyz/` (ensure a single normalized trailing-slash form)."
        },
        {
          "path": "frontend/src/utils/absoluteUrl.ts",
          "operation": "create",
          "description": "Add a small helper to build absolute URLs from `SITE_CONFIG.url` (normalize joining base + path) so future user-facing absolute links consistently use the canonical domain."
        }
      ]
    },
    {
      "id": "REQ-44",
      "summary": "Replace all hardcoded old-domain absolute URLs in the frontend with the new canonical domain wherever absolute URLs are used.",
      "acceptanceCriteria": [
        "A repository-wide search for `prasadenterprise.caffeine.xyz`, `www.prasadenterprise.caffeine.xyz`, and `significant-blush-1gq-draft.caffeine.xyz` returns no remaining user-facing references (excluding historical comments if any, but prefer removing those too).",
        "Any location where an absolute URL is presented to users (e.g., in copy, share links, SEO/canonical fields if present, or external link targets) uses `https://prasadenterprise-epm.caffeine.xyz/`."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/site/Footer.tsx",
          "operation": "modify",
          "description": "Audit for any hardcoded absolute URLs and update any old-domain references; prefer deriving any site absolute links from `SITE_CONFIG.url` (via the new absolute-url helper) to prevent regressions."
        },
        {
          "path": "frontend/src/components/site/Header.tsx",
          "operation": "modify",
          "description": "Audit header navigation and any external links (if present now or added later) to ensure no old-domain absolute URLs remain; keep navigation paths relative where possible."
        },
        {
          "path": "frontend/index.html",
          "operation": "modify",
          "description": "Audit for any hardcoded canonical/OG/meta URLs (if added previously) and ensure no old-domain references remain (keep as-is if none exist)."
        }
      ]
    },
    {
      "id": "REQ-45",
      "summary": "Keep the admin area reachable on the new domain and ensure any user-facing admin navigation/instructions reference the new domain (domain only) without preview token guidance.",
      "acceptanceCriteria": [
        "Visiting the admin route on the new domain works (e.g., `https://prasadenterprise-epm.caffeine.xyz/admin/...` according to the app’s current routing) without requiring draft/admin-preview URLs.",
        "No user-facing admin URL instructions (if present anywhere in the UI) reference the old domain or a `caffeineAdminToken=` preview URL."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/site/Footer.tsx",
          "operation": "modify",
          "description": "Add/adjust any user-facing admin navigation or guidance (if present/needed) to point to the existing admin path using the new canonical domain (build absolute URL from `SITE_CONFIG.url` + existing `/admin/...` path); do not mention or require any `caffeineAdminToken=` preview URLs."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Verify existing admin routes remain unchanged and registered (no path changes), ensuring `/admin/...` continues to resolve under the new domain."
        },
        {
          "path": "frontend/src/utils/urlParams.ts",
          "operation": "modify",
          "description": "Remove or revise any comments or user-facing references implying admin access requires URL token parameters (e.g., `caffeineAdminToken`) so the codebase does not suggest draft/preview access patterns."
        }
      ]
    }
  ]
}